{% extends 'base.html' %}
{% block content %}
<h1>Welcome to Flask Task</h1>
<a href="{{ url_for('logout') }}">Logout</a>
<div class="add-task">
    <h3>Add a new task</h3>
    <table>
        <tr>
            <form action="{{ url_for('add_task') }}" method="POST" name="add-task">
                <td>
                    <input type="text" name="name" placeholder="name" />
                </td>
                <td>
                    <input type="text" name="due_date" placeholder="Due date (YYYY/MM/DD)" width="120px" />
                </td>
                <td>
                    <label>Priority:</label>
                    <select name="priority" witdh="100px">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                    </select>
                </td>
                <td>
                    &nbsp;
                    &nbsp;
                    <input type="submit" class="button" value="Add task" />
                </td>
            </form>
        </tr>
    </table>
</div>
<div class="entries">
    <br /><br />
    <h2>Open tasks</h2>
    <div class="datagrid">
        <table>
            <thead>
                <tr>
                    <th width="300px"><strong>Task name</strong></th>
                    <th width="100px"><strong>Due date</strong></th>
                    <th width="50px"><strong>Priotiy</strong></th>
                    <th><strong>Actions</strong></th>
                </tr>
            </thead>
            {% for task in open_tasks %}
                <tr>
                    <td width="300px">{{ task.name }}</td>
                    <td width="100px">{{ task.due_date }}</td>
                    <td width="50px">{{ task.priority }}</td>
                    <td>
                        <a href="{{ url_for('complete_task', task_id=task.task_id) }}">Mark as complete </a>|
                        <a href="{{ url_for('delete_task', task_id=task.task_id) }}"> Delete task</a>
                    </td>
                </tr>
            {% endfor %}
        </table>
    </div>
</div>
<br /><br />
<div class="entries">
    <h2>Closed tasks</h2>
    <div class="datagrid">
        <table>
            <thead>
                <tr>
                    <th width="300px"><strong>Task name</strong></th>
                    <th width="100px"><strong>Due date</strong></th>
                    <th width="50px"><strong>Priotiy</strong></th>
                    <th><strong>Actions</strong></th>
                </tr>
            </thead>
            {% for task in closed_tasks %}
                <tr>
                    <td width="300px">{{ task.name }}</td>
                    <td width="100px">{{ task.due_date }}</td>
                    <td width="50px">{{ task.priority }}</td>
                    <td>
                        <a href="{{ url_for('delete_task', task_id=task.task_id) }}"> Delete task</a>
                    </td>
                </tr>
            {% endfor %}
        </table>
    </div>
</div>
{% endblock %}
